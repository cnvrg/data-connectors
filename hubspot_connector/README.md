# HubSpot Connector (Library)
The HubSpot Connector is a library that utilizes the HubSpot API to extract customer data based on user inputs. The library then stores this data as a CSV file and provides it as input to existing training and inference blueprints. A HubSpot account and its security access token are required to use this library.

Click [here](https://github.com/cnvrg/data-connectors/tree/master/hubspot_connector) for more information on this connector.

## Connector Flow
The following list provides this connector's high-level flow:
- The user defines inputs such as `access_token` in cnvrg Projects > Settings > Secrets.
- The connector initiates bulk queries for HubSpot, which pulls the data in bulk and appends it to multiple DataFrames according to their objects.
- The connector performs each iteration, which accesses the object-specific API in the user-defined app:
  - The user creates an app to access objects and generate an API by using the following flow: Private Apps > Create a private app > Scopes > CRM > Select the desired objects > Generate API.
  - The user copies the generated API and provides it as a `access_token` argument.
- The user (optionally) joins multiple tables according to requirements based on associations.
- The connector performs each iteration, calling the API and fetching data for the objects specified in the list.
- The connector creates separate DataFrames as a CSV file for each object.

## Inputs
This library assumes the user has an existing HubSpot account. The user's HubSpot `access_token` (to pull data from) is required as input, which can be obtained from the user's HubSpot account.
The HubSpot Connector requires the following inputs:
- `access_token` - Provide the access token of your HubSpot account. For security reasons, cnvrg recommends creating/updating the cnvrg Secret `????_TOKEN`. Select **Projects** > **Settings** > **Secrets** to store the HubSpot access token.
- `object_list` - Provide a list of objects from HubSpot to pull. Default Value: `deals,companies,contacts,feedback_submissions,line_items,products,tickets,quotes,calls,emails,meetings,notes,tasks`.
`--EntityDefinition_column_list` âˆ’ Provide a list of the `EntityDefinition` columns inside the user-defined columns. Default Value: `Id,Name,FirstName,LastName`.
- `count`- Set the limit for the number of records to be pulled. Default Value: `500`.
- `association_id_list`: Provide a list of IDs to be associated. Default Value: `None`.
- `object_type` - Set the object to be associated. Default Value: `None`.
- `to_object_type`- Set an object to be associated with. Default Value: `None`.

## Run Instructions
The code requires [Python 3](https://www.python.org/) installed on your system to run.

## Output
- The connector outputs data from multiple objects and saves it in object-named DataFrames `{object}.csv`
- The connector outputs data from associated objects and saves in the following DataFrame name `ObjectType_toObjectType.csv`

## Troubleshooting
Complete one or more of the following steps to troubleshoot issues that may be encountered with this connector:
- Confirm the `access_token` is valid.
- Check the job status, which cnvrg displays simultaneously for each task completed: when the data is pulled and when the job is completed.
- Check the Experiments > Artifacts section to confirm output CSV files have been generated by this connector.
- Check the logs (in the Experiments tab) for an error message. If the experiment fails, an error code displays and cnvrg enters Debug mode, which allows limited time to review the logs and resolve the problem.

## Related Blueprints
The HubSpot Connector can be used with the following blueprints:
- [Churn Detection Train](https://metacloud.cloud.cnvrg.io/marketplace/blueprints/churn-detection-train)
- [Churn Detection Inference](https://metacloud.cloud.cnvrg.io/marketplace/blueprints/churn-detection-inference)
